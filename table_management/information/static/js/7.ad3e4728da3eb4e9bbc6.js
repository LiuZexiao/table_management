webpackJsonp([7],{OKsD:function(e,t){},xbkJ:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={data:function(){return{department:"",category:"",ruleForm:{project:"",name:"",level:"",categoryId:1,proSource:"",departmentId:1,date:"",situation:""},rules:{project:[{required:!0,message:"请输入科研成果名称",trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}],departmentId:[{required:!0,message:"请选择系部",trigger:"change"}],level:[{required:!0,message:"请选择成果级别",trigger:"change"}],categoryId:[{required:!0,message:"请选择成果类别",trigger:"change"}],situation:[{required:!0,message:"请输入参与情况",trigger:"blur"}],proSource:[{required:!0,message:"请输入成果来源",trigger:"blur"}]}}},watch:{category:function(){var e=this.ruleForm;"论文"===this.category?e.categoryId=1:"专利"===this.category?e.categoryId=2:"软著"===this.category?e.categoryId=3:"教材"===this.category&&(e.categoryId=4)},department:function(){var e=this.ruleForm;"信息工程系"===this.department?e.departmentId=1:"机械工程系"===this.department?e.departmentId=2:"电子工程系"===this.department?e.departmentId=3:"人文社科系"===this.department?e.departmentId=4:"自动化工程系"===this.department&&(e.departmentId=5)}},mounted:function(){this.request()},methods:{submitForm:function(e){var t=this,r=this.ruleForm,a=new Date(this.ruleForm.date),l=a.getFullYear()+"-"+(a.getMonth()+1)+"-1";this.ruleForm.date=l,this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var a={proName:r.project,name:r.name,departmentId:r.departmentId,rank:r.level,categoryId:r.categoryId,situation:r.situation,certificationTime:r.date,proSource:r.proSource};t.$axios.post("/api/AddScientificServlet",a).then(function(e){0==e.data.code?(t.$message({showClose:!0,message:"修改成功\n3 秒后自动跳转到首页",type:"success",duration:2e3}),setTimeout(function(){t.$router.push({path:"/index"})},3e3)):t.$message.error("服务区响应错误")})})},resetForm:function(e){this.$refs[e].resetFields()},request:function(){var e=this;this.$axios.get("/api/UserinfoServlet").then(function(t){e.department=t.data.department,e.loadData(e.currentPage,e.pagesize)}).catch(function(e){console.log(e)})}}},l={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/index"}}},[e._v("首页")]),e._v(" "),r("el-breadcrumb-item",{attrs:{to:{}}},[e._v("报表信息管理")]),e._v(" "),r("el-breadcrumb-item",{attrs:{to:{}}},[e._v("添加报表")]),e._v(" "),r("el-breadcrumb-item",[e._v("科研获奖")])],1),e._v(" "),r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"科研成果",prop:"project"}},[r("el-input",{attrs:{placeholder:"请输入科研成果名称"},model:{value:e.ruleForm.project,callback:function(t){e.$set(e.ruleForm,"project",t)},expression:"ruleForm.project"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"姓名",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入负责人的姓名"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"成果类别",prop:"categoryId"}},[r("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择成果类别"},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}},[r("el-option",{attrs:{label:"论文",value:"论文"}}),e._v(" "),r("el-option",{attrs:{label:"专利",value:"专利"}}),e._v(" "),r("el-option",{attrs:{label:"软著",value:"软著"}}),e._v(" "),r("el-option",{attrs:{label:"教材",value:"教材"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"系部",prop:"departmentId"}},[r("el-select",{staticStyle:{width:"300px"},attrs:{disabled:"",placeholder:"请选择系部"},model:{value:e.department,callback:function(t){e.department=t},expression:"department"}},[r("el-option",{attrs:{label:"信息工程系",value:"信息工程系"}}),e._v(" "),r("el-option",{attrs:{label:"机械工程系",value:"机械工程系"}}),e._v(" "),r("el-option",{attrs:{label:"电子工程系",value:"电子工程系"}}),e._v(" "),r("el-option",{attrs:{label:"人文社科系",value:"人文社科系"}}),e._v(" "),r("el-option",{attrs:{label:"自动化工程系",value:"自动化工程系"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"成果来源",prop:"proSource"}},[r("el-input",{attrs:{placeholder:"请输入成果来源"},model:{value:e.ruleForm.proSource,callback:function(t){e.$set(e.ruleForm,"proSource",t)},expression:"ruleForm.proSource"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"成果级别",prop:"level"}},[r("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择级别"},model:{value:e.ruleForm.level,callback:function(t){e.$set(e.ruleForm,"level",t)},expression:"ruleForm.level"}},[r("el-option",{attrs:{label:"国家级",value:"国家级"}}),e._v(" "),r("el-option",{attrs:{label:"省级",value:"省级"}}),e._v(" "),r("el-option",{attrs:{label:"市级",value:"市级"}}),e._v(" "),r("el-option",{attrs:{label:"区级",value:"区级"}}),e._v(" "),r("el-option",{attrs:{label:"校级",value:"校级"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"取得时间",required:""}},[r("el-form-item",{attrs:{prop:"date"}},[r("el-date-picker",{staticStyle:{width:"300px"},attrs:{type:"month",placeholder:"选择日期"},model:{value:e.ruleForm.date,callback:function(t){e.$set(e.ruleForm,"date",t)},expression:"ruleForm.date"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"参与情况",prop:"situation",placeholder:"请输入参与情况"}},[r("el-input",{model:{value:e.ruleForm.situation,callback:function(t){e.$set(e.ruleForm,"situation",t)},expression:"ruleForm.situation"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("提交")]),e._v(" "),r("el-button",{on:{click:function(t){e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]};var o=r("VU/8")(a,l,!1,function(e){r("OKsD")},"data-v-40b5bd6a",null);t.default=o.exports}});
//# sourceMappingURL=7.ad3e4728da3eb4e9bbc6.js.map