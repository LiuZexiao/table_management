webpackJsonp([2],{ZTeD:function(e,t){},av3U:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l={props:["research","info"],data:function(){return{department:"",ruleForm:{id:0,proName:"",name:"",identity:"",departmentId:0,department:"",rank:"",grade:"",certificationCompany:"",type:"",semester:"",plan:"",certificationTime:"",stuId:"",stuClass:"",userinfoId:0},rules:{proName:[{required:!0,message:"请输入项目名称",trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}],department:[{required:!0,message:"请选择系部",trigger:"change"}],identity:[{required:!0,message:"请选择您的身份",trigger:"change"}],rank:[{required:!0,message:"请选择获奖级别",trigger:"change"}],grade:[{required:!0,message:"请选择获奖级别",trigger:"change"}],type:[{required:!0,message:"请选择竞赛种类",trigger:"change"}],certificationCompany:[{required:!0,message:"请输入发证单位",trigger:"blur"}],stuId:[{required:!0,message:"请输入学号",trigger:"blur"}],stuClass:[{required:!0,message:"请输入班级",trigger:"blur"}]}}},watch:{research:{handler:function(){this.diolog()},deep:!0},department:function(){var e=this.ruleForm;"信息工程系"===this.department?e.departmentId=1:"机械工程系"===this.department?e.departmentId=2:"电子工程系"===this.department?e.departmentId=3:"人文社科系"===this.department?e.departmentId=4:"自动化工程系"===this.department&&(e.departmentId=5)}},methods:{submitForm:function(e){var t=this,a=this.ruleForm;this.upDate(),"教师"===a.identity&&(a.styId="",a.class=""),"信息工程系"===a.department?a.departmentId=1:"机械工程系"===a.department?a.departmentId=2:"电子工程系"===a.department?a.departmentId=3:"人文社科系"===a.department?a.departmentId=4:"自动化工程系"===a.department&&(a.departmentId=5),this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var l={id:a.id,proName:a.proName,name:a.name,identity:a.identity,departmentId:a.departmentId,rank:a.rank,grade:a.grade,certificationCompany:a.certificationCompany,type:a.type,semester:a.semester,plan:a.plan,certificationTime:a.certificationTime,stuId:a.stuId,stuClass:a.stuClass,userinfoId:a.userinfoId};t.$axios.post("/api/UpdataAwardServlet",l).then(function(e){0==e.data.code&&(t.$message({showClose:!0,message:"修改成功\n",type:"success",duration:1e3}),t.research.dialogTableVisible=!1)})})},resetForm:function(e){this.$refs[e].resetFields()},diolog:function(){this.ruleForm=this.info},upDate:function(){var e,t,a,l=new Date(this.ruleForm.certificationTime),r=l.getFullYear(),i=l.getMonth()+1,n=r+"-"+i+"-01";this.ruleForm.certificationTime=n,i>=1&&i<=2?(e=r-1,a="上学期",this.ruleForm.semester=e+"~"+r+a):i>=3&&i<=8?(e=r-1,a="下学期",this.ruleForm.semester=e+"~"+r+a):(t=r+1,a="上学期",this.ruleForm.semester=r+"~"+t+a)}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"技能竞赛",width:"1170px",visible:e.research.dialogTableVisible,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.$set(e.research,"dialogTableVisible",t)}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"获奖项目",prop:"proName"}},[a("el-input",{attrs:{placeholder:"请输入获奖项目名称"},model:{value:e.ruleForm.proName,callback:function(t){e.$set(e.ruleForm,"proName",t)},expression:"ruleForm.proName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入项目负责人的姓名"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"身份",prop:"identity"}},[a("el-radio-group",{model:{value:e.ruleForm.identity,callback:function(t){e.$set(e.ruleForm,"identity",t)},expression:"ruleForm.identity"}},[a("el-radio",{attrs:{label:"学生"}}),e._v(" "),a("el-radio",{attrs:{label:"教师"}})],1)],1),e._v(" "),"学生"===e.ruleForm.identity?[a("el-form-item",{attrs:{label:"学号",prop:"stuId"}},[a("el-input",{attrs:{placeholder:"请输入你的学号"},model:{value:e.ruleForm.stuId,callback:function(t){e.$set(e.ruleForm,"stuId",t)},expression:"ruleForm.stuId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"班级",prop:"stuClass"}},[a("el-input",{attrs:{placeholder:"请输入你的班级"},model:{value:e.ruleForm.stuClass,callback:function(t){e.$set(e.ruleForm,"stuClass",t)},expression:"ruleForm.stuClass"}})],1)]:e._e(),e._v(" "),a("el-form-item",{attrs:{label:"系部",prop:"department"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择系部"},model:{value:e.ruleForm.department,callback:function(t){e.$set(e.ruleForm,"department",t)},expression:"ruleForm.department"}},[a("el-option",{attrs:{label:"信息工程系",value:"信息工程系"}}),e._v(" "),a("el-option",{attrs:{label:"机械工程系",value:"机械工程系"}}),e._v(" "),a("el-option",{attrs:{label:"电子工程系",value:"电子工程系"}}),e._v(" "),a("el-option",{attrs:{label:"人文社科系",value:"人文社科系"}}),e._v(" "),a("el-option",{attrs:{label:"自动化工程系",value:"自动化工程系"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"竞赛种类",prop:"type"}},[a("el-radio-group",{model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},[a("el-radio",{attrs:{label:"学科"}}),e._v(" "),a("el-radio",{attrs:{label:"技能"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"级别",prop:"rank"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择级别"},model:{value:e.ruleForm.rank,callback:function(t){e.$set(e.ruleForm,"rank",t)},expression:"ruleForm.rank"}},[a("el-option",{attrs:{label:"国家级",value:"国家级"}}),e._v(" "),a("el-option",{attrs:{label:"省级",value:"省级"}}),e._v(" "),a("el-option",{attrs:{label:"市级",value:"市级"}}),e._v(" "),a("el-option",{attrs:{label:"区级",value:"区级"}}),e._v(" "),a("el-option",{attrs:{label:"校级",value:"校级"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"等级",prop:"grade"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择等级"},model:{value:e.ruleForm.grade,callback:function(t){e.$set(e.ruleForm,"grade",t)},expression:"ruleForm.grade"}},[a("el-option",{attrs:{label:"一等奖",value:"一等奖"}}),e._v(" "),a("el-option",{attrs:{label:"二等奖",value:"二等奖"}}),e._v(" "),a("el-option",{attrs:{label:"三等奖",value:"三等奖"}}),e._v(" "),a("el-option",{attrs:{label:"其他",value:"其他"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"发证时间",required:""}},[a("el-form-item",{attrs:{prop:"certificationTime"}},[a("el-date-picker",{staticStyle:{width:"300px"},attrs:{type:"month",placeholder:"选择日期"},model:{value:e.ruleForm.certificationTime,callback:function(t){e.$set(e.ruleForm,"certificationTime",t)},expression:"ruleForm.certificationTime"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"发证单位",prop:"certificationCompany"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入发证单位"},model:{value:e.ruleForm.certificationCompany,callback:function(t){e.$set(e.ruleForm,"certificationCompany",t)},expression:"ruleForm.certificationCompany"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"情况说明",prop:"plan"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.ruleForm.plan,callback:function(t){e.$set(e.ruleForm,"plan",t)},expression:"ruleForm.plan"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-left":"-90px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("提交")]),e._v(" "),a("el-button",{on:{click:function(t){e.resetForm("ruleForm")}}},[e._v("重置")])],1)],2)],1)},staticRenderFns:[]};var i={data:function(){return{department:"",time:[],multipleSelection:[],tableData:[],info:{},selectTable:{departmentId:0,identity:"",type:"",rank:"",clock1:"",clock2:"",uName:""},pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近六个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-15552e6),e.$emit("pick",[a,t])}},{text:"最近一年",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-31104e6),e.$emit("pick",[a,t])}}]},research:{dialogTableVisible:!1},admin:{userinfoId:0,departmentId:1,roleId:1},currentPage:1,pagesize:8,totalCount:10,display:!1,depart:!0,delete:[],userDis:!0}},components:{"my-dialogSkill":a("VU/8")(l,r,!1,function(e){a("nSVQ")},null,null).exports},watch:{department:function(){var e=this.selectTable;"信息工程系"===this.department?e.departmentId=1:"机械工程系"===this.department?e.departmentId=2:"电子工程系"===this.department?e.departmentId=3:"人文社科系"===this.department?e.departmentId=4:"自动化工程系"===this.department?e.departmentId=5:e.departmentId=0},tableData:function(){this.tableData.length>=this.pagesize&&(this.display=!0)},time:function(){if(0===this.time.length)this.selectTable.clock1="",this.selectTable.clock2="";else{var e=new Date(this.time[0]),t=e.getFullYear()+"-"+(e.getMonth()+1)+"-1";this.selectTable.clock1=t;var a=new Date(this.time[1]),l=a.getFullYear()+"-"+(a.getMonth()+1)+"-1";this.selectTable.clock2=l}}},mounted:function(){this.request()},methods:{handleSelectionChange:function(e){this.multipleSelection=e},handleSizeChange:function(e){this.loadData(this.currentPage,this.pagesize)},handleCurrentChange:function(e){this.loadData(this.currentPage,this.pagesize)},handleEdit:function(e,t){this.info=t,this.research.dialogTableVisible=!0},handleDelete:function(e,t){var a=this;this.delete=[t.id];this.$confirm("此操作将永久删除该账号, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={id:a.delete,jsonLength:1};a.$axios.post("/api/DeleteAwardServlet",e).then(function(e){0==e.data.code?(a.$message({type:"success",message:"删除成功!"}),a.loadData(a.currentPage,a.pagesize)):a.$message.error("删除失败")}).catch(function(e){console.log(e)})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},del:function(){var e=this,t=0;for(var a in this.multipleSelection)t++;if(0===t)return this.$message({message:"请选择需要删除的内容",type:"warning"}),!1;for(var l=0;l<t;l++)this.delete[l]=this.multipleSelection[l].id;this.$confirm("此操作将永久删除该账号, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={id:e.delete,jsonLength:t};e.$axios.post("/api/DeleteAwardServlet",a).then(function(t){0==t.data.code?(e.$message({type:"success",message:"删除成功!"}),e.loadData(e.currentPage,e.pagesize)):e.$message.error("删除失败")}).catch(function(e){console.log(e)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},output:function(){var e=this.selectTable,t={departmentId:e.departmentId,identity:e.identity,rank:e.rank,type:e.type,clock1:e.clock1,clock2:e.clock2,uName:e.uName,userinfoId:this.admin.userinfoId};2===this.admin.roleId&&(t.departmentId=this.admin.departmentId),this.$axios.post("/api/OutPutAwardServlet",t,{responseType:"arraybuffer"}).then(function(e){if(e){var t=window.URL.createObjectURL(new Blob([e.data],{type:"application/vnd.ms-excel"}));console.log(t);var a=document.createElement("a");a.style.display="none",a.href=t,a.setAttribute("download","科研获奖.xls"),document.body.appendChild(a),a.click()}}).catch().catch(function(e){console.log(e)})},select:function(){var e=this.selectTable,t=e.identity,a=(this.department,e.rank),l=e.type,r=e.clock1,i=e.clock2;e.uName;if(!(t||this.department||a||l||e.uName||r||i))return this.$message({showClose:!0,message:"请选择查询条件！\n",type:"warning",duration:1e3}),!1;this.loadData(this.currentPage,this.pagesize),this.$message({showClose:!0,message:"查询成功\n",type:"success",duration:1e3})},refresh:function(){this.department="",this.time=[],this.selectTable={departmentId:0,identity:"",type:"",rank:"",clock1:"",clock2:"",uName:""},this.request(),this.$message({showClose:!0,message:"刷新成功\n",type:"success",duration:1e3})},return:function(){this.selectTable},loadData:function(e,t){var a=this,l=this.selectTable,r={pageNum:e,pageSize:t,departmentId:l.departmentId,identity:l.identity,rank:l.rank,type:l.type,clock1:l.clock1,clock2:l.clock2,uName:l.uName,userinfoId:this.admin.userinfoId};2===this.admin.roleId&&(r.departmentId=this.admin.departmentId),this.$axios.post("/api/AwardPageServlet",r).then(function(e){a.tableData=e.data.tableData,a.totalCount=e.data.totalCount}).catch(function(e){console.log(e)})},request:function(){var e=this,t=this.admin;this.tableData;this.$axios.get("/api/UserinfoServlet").then(function(a){t.departmentId=a.data.departmentId,t.roleId=a.data.roleId,t.roleId>1&&(e.selectTable.departmentId=t.departmentId,e.depart=!1),3===t.roleId?(e.admin.userinfoId=a.data.id,e.userDis=!1):e.admin.userinfoId=0,e.loadData(e.currentPage,e.pagesize)}).catch(function(e){console.log(e)})}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/index"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{}}},[e._v("报表信息管理")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{}}},[e._v("管理报表")]),e._v(" "),a("el-breadcrumb-item",[e._v("技能竞赛")])],1),e._v(" "),a("div",{staticStyle:{float:"left",margin:"20px 0 10px 50px",display:"flex"}},[a("el-date-picker",{staticStyle:{width:"230px"},attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions2},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}}),e._v(" "),a("el-select",{directives:[{name:"show",rawName:"v-show",value:e.depart,expression:"depart"}],staticStyle:{width:"120px"},attrs:{clearable:"",placeholder:"部门"},model:{value:e.department,callback:function(t){e.department=t},expression:"department"}},[a("el-option",{attrs:{label:"信息工程系",value:"信息工程系"}}),e._v(" "),a("el-option",{attrs:{label:"机械工程系",value:"机械工程系"}}),e._v(" "),a("el-option",{attrs:{label:"电子工程系",value:"电子工程系"}}),e._v(" "),a("el-option",{attrs:{label:"人文社科系",value:"人文社科系"}}),e._v(" "),a("el-option",{attrs:{label:"自动化工程系",value:"自动化工程系"}})],1),e._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.userDis,expression:"userDis"}],staticStyle:{width:"90px"},attrs:{placeholder:"填报人"},model:{value:e.selectTable.uName,callback:function(t){e.$set(e.selectTable,"uName",t)},expression:"selectTable.uName"}}),e._v(" "),a("el-select",{staticStyle:{width:"80px"},attrs:{clearable:"",placeholder:"身份"},model:{value:e.selectTable.identity,callback:function(t){e.$set(e.selectTable,"identity",t)},expression:"selectTable.identity"}},[a("el-option",{attrs:{label:"学生",value:"学生"}}),e._v(" "),a("el-option",{attrs:{label:"教师",value:"教师"}})],1),e._v(" "),a("el-select",{staticStyle:{width:"110px"},attrs:{clearable:"",placeholder:"竞赛种类"},model:{value:e.selectTable.type,callback:function(t){e.$set(e.selectTable,"type",t)},expression:"selectTable.type"}},[a("el-option",{attrs:{label:"学科",value:"学科"}}),e._v(" "),a("el-option",{attrs:{label:"技能",value:"技能"}})],1),e._v(" "),a("el-select",{staticStyle:{width:"90px"},attrs:{clearable:"",placeholder:"级别"},model:{value:e.selectTable.rank,callback:function(t){e.$set(e.selectTable,"rank",t)},expression:"selectTable.rank"}},[a("el-option",{attrs:{label:"国家级",value:"国家级"}}),e._v(" "),a("el-option",{attrs:{label:"省级",value:"省级"}}),e._v(" "),a("el-option",{attrs:{label:"市级",value:"市级"}}),e._v(" "),a("el-option",{attrs:{label:"区级",value:"区级"}}),e._v(" "),a("el-option",{attrs:{label:"校级",value:"校级"}})],1),e._v(" "),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",round:"",icon:"el-icon-search"},on:{click:e.select}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",round:"",icon:"el-icon-refresh"},on:{click:e.refresh}}),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:e.del}},[e._v("批量删除")]),e._v(" "),a("el-button",{attrs:{size:"medium ",type:"primary"},on:{click:e.output}},[e._v("批量导出")])],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"35"}}),e._v(" "),a("el-table-column",{attrs:{prop:"certificationTime",label:"获奖时间",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"semester",label:"学期",width:"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"department",label:"系部",width:"120","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"identity",label:"身份",width:"80","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"proName",label:"获奖项目","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"竞赛种类",width:"80","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"rank",label:"级别",width:"100","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"grade",label:"等级",width:"100","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"uName",label:"填报人",width:"100","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}}),e._v(" "),a("el-button",{attrs:{size:"mini",icon:"el-icon-delete",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}})]}}])})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.display,expression:"display"}],staticClass:"block",staticStyle:{position:"fixed",bottom:"30px",left:"20%",right:"5%"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pagesize,layout:"prev, pager, next, jumper",total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1),e._v(" "),a("my-dialogSkill",{attrs:{research:e.research,info:e.info}})],1)},staticRenderFns:[]};var o=a("VU/8")(i,n,!1,function(e){a("ZTeD")},null,null);t.default=o.exports},nSVQ:function(e,t){}});
//# sourceMappingURL=2.1a9e8a2bbdfe00d074ac.js.map