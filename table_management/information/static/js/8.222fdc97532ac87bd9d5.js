webpackJsonp([8],{GGhu:function(e,t){},bHyw:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={name:"userInfo",data:function(){return{btn:!0,department:"",user:{uName:"",departmentId:0},rules:{uName:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}],departmentId:[{required:!0,message:"请选择系部",trigger:"change"}]}}},mounted:function(){this.request()},watch:{department:function(){var e=this.user;"信息工程系"===this.department?e.departmentId=1:"机械工程系"===this.department?e.departmentId=2:"电子工程系"===this.department?e.departmentId=3:"人文社科系"===this.department?e.departmentId=4:(this.department="自动化工程系")&&(e.departmentId=5)}},methods:{sign:function(){var e=this.user;1===e.departmentId?this.department="信息工程系":2===e.departmentId?this.department="机械工程系":3===e.departmentId?this.department="电子工程系":4===e.departmentId?this.department="人文社科系":5===e.departmentId&&(this.department="自动化工程系")},show:function(e){13===e.keyCode&&this.submitForm("loginFor")},submitForm:function(){var e=this,t=this.user;if(!t.uName||!t.departmentId)return this.$message.error("表单填写不完整！");var a={uName:t.uName,departmentId:t.departmentId};this.$axios.post("/api/MyUpdataInfoServlet",a).then(function(t){0==t.data.code?(e.$message({showClose:!0,message:"修改成功\n3 秒后自动跳转到管理报表页面",type:"success",duration:2e3}),setTimeout(function(){e.$router.push({path:"/index"})},3e3)):e.$message.error("修改失败！")}).catch(function(e){console.log(e)}),this.sign()},request:function(){var e=this,t=this.user;this.$axios.get("/api/UserinfoServlet").then(function(a){t.uName=a.data.uName,t.departmentId=a.data.departmentId,e.sign()}).catch(function(e){console.log(e)})}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{on:{keydown:function(t){e.show(t)}}},[a("el-form",{ref:"user",staticClass:"demo-ruleForm",attrs:{model:e.user,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"姓名",prop:"uName"}},[a("el-input",{attrs:{placeholder:"请输入您的真实姓名"},model:{value:e.user.uName,callback:function(t){e.$set(e.user,"uName",t)},expression:"user.uName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属系部",prop:"departmentId"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择系部"},model:{value:e.department,callback:function(t){e.department=t},expression:"department"}},[a("el-option",{attrs:{label:"信息工程系",value:"信息工程系"}}),e._v(" "),a("el-option",{attrs:{label:"机械工程系",value:"机械工程系"}}),e._v(" "),a("el-option",{attrs:{label:"电子工程系",value:"电子工程系"}}),e._v(" "),a("el-option",{attrs:{label:"人文社科系",value:"人文社科系"}}),e._v(" "),a("el-option",{attrs:{label:"自动化工程系",value:"自动化工程系"}})],1)],1),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.btn,expression:"btn"}],staticClass:"finishBtn return",on:{click:function(t){e.submitForm()}}},[e._v("完成")]),e._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.btn,expression:"!btn"}],staticClass:"finishBtn",attrs:{disabled:"disabled"}},[e._v("完成")])],1)],1)},staticRenderFns:[]};var s=a("VU/8")(r,n,!1,function(e){a("GGhu")},"data-v-3ba97d4a",null);t.default=s.exports}});
//# sourceMappingURL=8.222fdc97532ac87bd9d5.js.map