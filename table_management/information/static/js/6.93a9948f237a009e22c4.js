webpackJsonp([6],{L6Q4:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l={data:function(){return{department:"",ruleForm:{project:"",name:"",identity:"",departmentId:5,level:"",grade:"",certificationCompany:"",type:"",semester:"",explain:"",date:"",stuId:"",class:""},rules:{project:[{required:!0,message:"请输入项目名称",trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}],departmentId:[{required:!0,message:"请选择系部",trigger:"change"}],identity:[{required:!0,message:"请选择您的身份",trigger:"change"}],level:[{required:!0,message:"请选择获奖级别",trigger:"change"}],grade:[{required:!0,message:"请选择获奖级别",trigger:"change"}],type:[{required:!0,message:"请选择竞赛种类",trigger:"change"}],certificationCompany:[{required:!0,message:"请输入发证单位",trigger:"blur"}],stuId:[{required:!0,message:"请输入学号",trigger:"blur"}],class:[{required:!0,message:"请输入班级",trigger:"blur"}]}}},watch:{department:function(){var e=this.ruleForm;"信息工程系"===this.department?e.departmentId=1:"机械工程系"===this.department?e.departmentId=2:"电子工程系"===this.department?e.departmentId=3:"人文社科系"===this.department?e.departmentId=4:(this.department="自动化工程系")&&(e.departmentId=5)}},mounted:function(){this.request()},methods:{submitForm:function(e){var t=this,r=this.ruleForm;this.upDate(),"教师"===r.identity&&(r.styId="",r.class=""),this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var l={name:r.name,departmentId:r.departmentId,identity:r.identity,stuId:r.stuId,stuClass:r.class,rank:r.level,proName:r.project,grade:r.grade,type:r.type,certificationTime:r.date,certificationCompany:r.certificationCompany,semester:r.semester,plan:r.explain};t.$axios.post("/api/AddAwardServlet",l).then(function(e){0==e.data.code?(t.$message({showClose:!0,message:"修改成功\n3 秒后自动跳转到首页",type:"success",duration:2e3}),setTimeout(function(){t.$router.push({path:"/index"})},3e3)):t.$message.error("服务区响应错误")})})},resetForm:function(e){this.$refs[e].resetFields()},upDate:function(){var e,t,r,l=new Date(this.ruleForm.date),a=l.getFullYear(),o=l.getMonth()+1,s=a+"-"+o+"-1";this.ruleForm.date=s,o>=1&&o<=2?(e=a-1,r="上学期",this.ruleForm.semester=e+"~"+a+r):o>=3&&o<=8?(e=a-1,r="下学期",this.ruleForm.semester=e+"~"+a+r):(t=a+1,r="上学期",this.ruleForm.semester=a+"~"+t+r)},request:function(){var e=this;this.$axios.get("/api/UserinfoServlet").then(function(t){e.department=t.data.department,e.loadData(e.currentPage,e.pagesize)}).catch(function(e){console.log(e)})}}},a={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/index"}}},[e._v("首页")]),e._v(" "),r("el-breadcrumb-item",{attrs:{to:{}}},[e._v("报表信息管理")]),e._v(" "),r("el-breadcrumb-item",{attrs:{to:{}}},[e._v("添加报表")]),e._v(" "),r("el-breadcrumb-item",[e._v("技能竞赛")])],1),e._v(" "),r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"获奖项目",prop:"project"}},[r("el-input",{attrs:{placeholder:"请输入获奖项目名称"},model:{value:e.ruleForm.project,callback:function(t){e.$set(e.ruleForm,"project",t)},expression:"ruleForm.project"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"姓名",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入项目负责人的姓名"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"身份",prop:"identity"}},[r("el-radio-group",{model:{value:e.ruleForm.identity,callback:function(t){e.$set(e.ruleForm,"identity",t)},expression:"ruleForm.identity"}},[r("el-radio",{attrs:{label:"学生"}}),e._v(" "),r("el-radio",{attrs:{label:"教师"}})],1)],1),e._v(" "),"学生"===e.ruleForm.identity?[r("el-form-item",{attrs:{label:"学号",prop:"stuId"}},[r("el-input",{attrs:{placeholder:"请输入你的学号"},model:{value:e.ruleForm.stuId,callback:function(t){e.$set(e.ruleForm,"stuId",t)},expression:"ruleForm.stuId"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"班级",prop:"class"}},[r("el-input",{attrs:{placeholder:"请输入你的班级"},model:{value:e.ruleForm.class,callback:function(t){e.$set(e.ruleForm,"class",t)},expression:"ruleForm.class"}})],1)]:e._e(),e._v(" "),r("el-form-item",{attrs:{label:"系部",prop:"departmentId"}},[r("el-select",{staticStyle:{width:"300px"},attrs:{disabled:"",placeholder:"请选择系部"},model:{value:e.department,callback:function(t){e.department=t},expression:"department"}},[r("el-option",{attrs:{label:"信息工程系",value:"信息工程系"}}),e._v(" "),r("el-option",{attrs:{label:"机械工程系",value:"机械工程系"}}),e._v(" "),r("el-option",{attrs:{label:"电子工程系",value:"电子工程系"}}),e._v(" "),r("el-option",{attrs:{label:"人文社科系",value:"人文社科系"}}),e._v(" "),r("el-option",{attrs:{label:"自动化工程系",value:"自动化工程系"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"竞赛种类",prop:"type"}},[r("el-radio-group",{model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},[r("el-radio",{attrs:{label:"学科"}}),e._v(" "),r("el-radio",{attrs:{label:"技能"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"级别",prop:"level"}},[r("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择级别"},model:{value:e.ruleForm.level,callback:function(t){e.$set(e.ruleForm,"level",t)},expression:"ruleForm.level"}},[r("el-option",{attrs:{label:"国家级",value:"国家级"}}),e._v(" "),r("el-option",{attrs:{label:"省级",value:"省级"}}),e._v(" "),r("el-option",{attrs:{label:"市级",value:"市级"}}),e._v(" "),r("el-option",{attrs:{label:"区级",value:"区级"}}),e._v(" "),r("el-option",{attrs:{label:"校级",value:"校级"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"等级",prop:"grade"}},[r("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择等级"},model:{value:e.ruleForm.grade,callback:function(t){e.$set(e.ruleForm,"grade",t)},expression:"ruleForm.grade"}},[r("el-option",{attrs:{label:"一等奖",value:"一等奖"}}),e._v(" "),r("el-option",{attrs:{label:"二等奖",value:"二等奖"}}),e._v(" "),r("el-option",{attrs:{label:"三等奖",value:"三等奖"}}),e._v(" "),r("el-option",{attrs:{label:"其他",value:"其他"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"发证时间",required:""}},[r("el-form-item",{attrs:{prop:"date"}},[r("el-date-picker",{staticStyle:{width:"300px"},attrs:{type:"month",placeholder:"选择日期"},model:{value:e.ruleForm.date,callback:function(t){e.$set(e.ruleForm,"date",t)},expression:"ruleForm.date"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"发证单位",prop:"certificationCompany"}},[r("el-input",{attrs:{type:"textarea",placeholder:"请输入发证单位"},model:{value:e.ruleForm.certificationCompany,callback:function(t){e.$set(e.ruleForm,"certificationCompany",t)},expression:"ruleForm.certificationCompany"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"情况说明",prop:"explain"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.ruleForm.explain,callback:function(t){e.$set(e.ruleForm,"explain",t)},expression:"ruleForm.explain"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("提交")]),e._v(" "),r("el-button",{on:{click:function(t){e.resetForm("ruleForm")}}},[e._v("重置")])],1)],2)],1)},staticRenderFns:[]};var o=r("VU/8")(l,a,!1,function(e){r("U+vD")},"data-v-461131b0",null);t.default=o.exports},"U+vD":function(e,t){}});
//# sourceMappingURL=6.93a9948f237a009e22c4.js.map