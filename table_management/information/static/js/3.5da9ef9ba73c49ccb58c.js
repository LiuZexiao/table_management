webpackJsonp([3],{GcGv:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={props:["research","info"],data:function(){return{department:"",category:"",ruleForm:{id:0,proName:"",name:"",rank:"",categoryId:0,categoryName:"",proSource:"",departmentId:0,department:"",certificationTime:"",situation:"",userinfoId:0},rules:{proName:[{required:!0,message:"请输入科研成果名称",trigger:"blur"}],name:[{required:!0,message:"请输入姓名",trigger:"blur"},{min:2,max:10,message:"长度在 2 到 10 个字符",trigger:"blur"}],department:[{required:!0,message:"请选择系部",trigger:"change"}],rank:[{required:!0,message:"请选择成果级别",trigger:"change"}],categoryName:[{required:!0,message:"请选择成果类别",trigger:"change"}],situation:[{required:!0,message:"请输入参与情况",trigger:"blur"}],proSource:[{required:!0,message:"请输入成果来源",trigger:"blur"}]}}},watch:{research:{handler:function(){this.diolog()},deep:!0},department:function(){var e=this.ruleForm;"信息工程系"===this.department?e.departmentId=1:"机械工程系"===this.department?e.departmentId=2:"电子工程系"===this.department?e.departmentId=3:"人文社科系"===this.department?e.departmentId=4:"自动化工程系"===this.department?e.departmentId=5:e.departmentId=0},category:function(){var e=this.selectTable;"论文"===this.categoryName?e.categoryId=1:"专利"===this.categoryName?e.categoryId=2:"软著"===this.categoryName?e.categoryId=3:"教材"===this.categoryName?e.categoryId=4:e.categoryId=0}},methods:{submitForm:function(e){var t=this,a=this.ruleForm;"信息工程系"===a.department?a.departmentId=1:"机械工程系"===a.department?a.departmentId=2:"电子工程系"===a.department?a.departmentId=3:"人文社科系"===a.department?a.departmentId=4:"自动化工程系"===a.department?a.departmentId=5:a.departmentId=0,"论文"===a.categoryName?a.categoryId=1:"专利"===a.categoryName?a.categoryId=2:"软著"===a.categoryName?a.categoryId=3:"教材"===a.categoryName?a.categoryId=4:a.categoryId=0;var r=new Date(this.ruleForm.certificationTime),l=r.getFullYear()+"-"+(r.getMonth()+1)+"-1";this.ruleForm.certificationTime=l,this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var r={id:a.id,proName:a.proName,name:a.name,departmentId:a.departmentId,rank:a.rank,categoryId:a.categoryId,situation:a.situation,certificationTime:a.certificationTime,proSource:a.proSource,userinfoId:a.userinfoId};t.$axios.post("/api/UpdataScientificServlet",r).then(function(e){0==e.data.code&&(t.$message({showClose:!0,message:"修改成功\n",type:"success",duration:1e3}),t.research.dialogTableVisible=!1)})})},resetForm:function(e){this.$refs[e].resetFields()},diolog:function(){this.ruleForm=this.info}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"科研获奖",width:"1170px",visible:e.research.dialogTableVisible,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.$set(e.research,"dialogTableVisible",t)}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"科研成果",prop:"proName"}},[a("el-input",{attrs:{placeholder:"请输入科研成果名称"},model:{value:e.ruleForm.proName,callback:function(t){e.$set(e.ruleForm,"proName",t)},expression:"ruleForm.proName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入负责人的姓名"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"成果类别",prop:"categoryName"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择成果类别"},model:{value:e.ruleForm.categoryName,callback:function(t){e.$set(e.ruleForm,"categoryName",t)},expression:"ruleForm.categoryName"}},[a("el-option",{attrs:{label:"论文",value:"论文"}}),e._v(" "),a("el-option",{attrs:{label:"专利",value:"专利"}}),e._v(" "),a("el-option",{attrs:{label:"软著",value:"软著"}}),e._v(" "),a("el-option",{attrs:{label:"教材",value:"教材"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"系部",prop:"department"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择系部"},model:{value:e.ruleForm.department,callback:function(t){e.$set(e.ruleForm,"department",t)},expression:"ruleForm.department"}},[a("el-option",{attrs:{label:"信息工程系",value:"信息工程系"}}),e._v(" "),a("el-option",{attrs:{label:"机械工程系",value:"机械工程系"}}),e._v(" "),a("el-option",{attrs:{label:"电子工程系",value:"电子工程系"}}),e._v(" "),a("el-option",{attrs:{label:"人文社科系",value:"人文社科系"}}),e._v(" "),a("el-option",{attrs:{label:"自动化工程系",value:"自动化工程系"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"成果来源",prop:"proSource"}},[a("el-input",{attrs:{placeholder:"请输入成果来源"},model:{value:e.ruleForm.proSource,callback:function(t){e.$set(e.ruleForm,"proSource",t)},expression:"ruleForm.proSource"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"成果级别",prop:"rank"}},[a("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:"请选择级别"},model:{value:e.ruleForm.rank,callback:function(t){e.$set(e.ruleForm,"rank",t)},expression:"ruleForm.rank"}},[a("el-option",{attrs:{label:"国家级",value:"国家级"}}),e._v(" "),a("el-option",{attrs:{label:"省级",value:"省级"}}),e._v(" "),a("el-option",{attrs:{label:"市级",value:"市级"}}),e._v(" "),a("el-option",{attrs:{label:"区级",value:"区级"}}),e._v(" "),a("el-option",{attrs:{label:"校级",value:"校级"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"取得时间",required:""}},[a("el-form-item",{attrs:{prop:"date"}},[a("el-date-picker",{staticStyle:{width:"300px"},attrs:{type:"month",placeholder:"选择日期"},model:{value:e.ruleForm.certificationTime,callback:function(t){e.$set(e.ruleForm,"certificationTime",t)},expression:"ruleForm.certificationTime"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"参与情况",prop:"situation",placeholder:"请输入参与情况"}},[a("el-input",{model:{value:e.ruleForm.situation,callback:function(t){e.$set(e.ruleForm,"situation",t)},expression:"ruleForm.situation"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-left":"-90px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("提交")]),e._v(" "),a("el-button",{on:{click:function(t){e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]};var o={name:"manageResearch",data:function(){return{department:"",category:"",time:[],tableData:[],multipleSelection:[],info:{},selectTable:{departmentId:0,rank:"",categoryId:0,clock1:"",clock2:"",uName:""},pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近六个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-15552e6),e.$emit("pick",[a,t])}},{text:"最近一年",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-31104e6),e.$emit("pick",[a,t])}}]},research:{dialogTableVisible:!1},admin:{userinfoId:0,departmentId:1,roleId:1},currentPage:1,pagesize:8,totalCount:10,display:!1,depart:!0,delete:[],userDis:!0,local:""}},components:{"my-dialogResearch":a("VU/8")(r,l,!1,function(e){a("zCTG")},null,null).exports},watch:{department:function(){var e=this.selectTable;"信息工程系"===this.department?e.departmentId=1:"机械工程系"===this.department?e.departmentId=2:"电子工程系"===this.department?e.departmentId=3:"人文社科系"===this.department?e.departmentId=4:"自动化工程系"===this.department?e.departmentId=5:e.departmentId=0},category:function(){var e=this.selectTable;"论文"===this.category?e.categoryId=1:"专利"===this.category?e.categoryId=2:"软著"===this.category?e.categoryId=3:"教材"===this.category?e.categoryId=4:e.categoryId=0},tableData:function(){this.tableData.length>=this.pagesize&&(this.display=!0)},time:function(){if(0===this.time.length)this.selectTable.clock1="",this.selectTable.clock2="";else{var e=new Date(this.time[0]),t=e.getFullYear()+"-"+(e.getMonth()+1)+"-1";this.selectTable.clock1=t;var a=new Date(this.time[1]),r=a.getFullYear()+"-"+(a.getMonth()+1)+"-1";this.selectTable.clock2=r}}},methods:{handleSelectionChange:function(e){this.multipleSelection=e},handleSizeChange:function(e){this.loadData(this.currentPage,this.pagesize)},handleCurrentChange:function(e){this.loadData(this.currentPage,this.pagesize)},handleEdit:function(e,t){this.info=t,this.research.dialogTableVisible=!0},handleDelete:function(e,t){var a=this;this.delete=[t.id];this.$confirm("此操作将永久删除该账号, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={id:a.delete,jsonLength:1};a.$axios.post("/api/DeleteScientificServlet",e).then(function(e){0==e.data.code?(a.$message({type:"success",message:"删除成功!"}),a.loadData(a.currentPage,a.pagesize)):a.$message.error("删除失败")}).catch(function(e){console.log(e)})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},del:function(){var e=this,t=0;for(var a in this.multipleSelection)t++;if(0===t)return this.$message({message:"请选择需要删除的内容",type:"warning"}),!1;for(var r=0;r<t;r++)this.delete[r]=this.multipleSelection[r].id;this.$confirm("此操作将永久删除该账号, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={id:e.delete,jsonLength:t};e.$axios.post("/api/DeleteScientificServlet",a).then(function(t){0==t.data.code?(e.$message({type:"success",message:"删除成功!"}),e.loadData(e.currentPage,e.pagesize)):e.$message.error("删除失败")}).catch(function(e){console.log(e)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},select:function(){var e=this.selectTable,t={department:this.department,rank:e.rank,categoryId:e.categoryId,clock1:e.clock1,clock2:e.clock2,uName:e.uName};if(!(t.identity||this.department||t.rank||this.category||e.uName||t.clock1||t.clock2))return this.$message({showClose:!0,message:"请选择查询条件！\n",type:"warning",duration:1e3}),!1;this.loadData(this.currentPage,this.pagesize),this.$message({showClose:!0,message:"查询成功\n",type:"success",duration:1e3})},refresh:function(){this.department="",this.category="",this.time=[],this.selectTable={departmentId:0,categoryId:0,rank:"",clock1:"",clock2:"",uName:""},this.request(),this.$message({showClose:!0,message:"刷新成功\n",type:"success",duration:1e3})},output:function(){var e=this.selectTable,t={departmentId:e.departmentId,rank:e.rank,clock1:e.clock1,clock2:e.clock2,uName:e.uName,categoryId:e.categoryId,userinfoId:this.admin.userinfoId};2===this.admin.roleId&&(t.departmentId=this.admin.departmentId),this.$axios.post("/api/OutPutScientificServlet",t,{responseType:"arraybuffer"}).then(function(e){if(e){var t=window.URL.createObjectURL(new Blob([e.data],{type:"application/vnd.ms-excel"}));console.log(t);var a=document.createElement("a");a.style.display="none",a.href=t,a.setAttribute("download","技能竞赛.xls"),document.body.appendChild(a),a.click()}}).catch(function(e){console.log(e)})},loadData:function(e,t){var a=this,r=this.selectTable,l={pageNum:e,pageSize:t,departmentId:r.departmentId,rank:r.rank,clock1:r.clock1,clock2:r.clock2,uName:r.uName,categoryId:r.categoryId,userinfoId:this.admin.userinfoId};2===this.admin.roleId&&(l.departmentId=this.admin.departmentId),this.$axios.post("/api/ScientificPageServlet",l).then(function(e){a.tableData=e.data.tableData,a.totalCount=e.data.totalCount}).catch(function(e){console.log(e)})},request:function(){var e=this,t=this.admin;this.tableData;this.$axios.get("/api/UserinfoServlet").then(function(a){t.departmentId=a.data.departmentId,t.roleId=a.data.roleId,t.roleId>1&&(e.selectTable.departmentId=t.departmentId,e.depart=!1),3===t.roleId?(e.admin.userinfoId=a.data.id,e.userDis=!1):e.admin.userinfoId=0,e.loadData(e.currentPage,e.pagesize)}).catch(function(e){console.log(e)})}},mounted:function(){this.request()}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/index"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{}}},[e._v("报表信息管理")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{}}},[e._v("管理报表")]),e._v(" "),a("el-breadcrumb-item",[e._v("科研获奖")])],1),e._v(" "),a("div",{staticStyle:{float:"left",margin:"20px 0 10px 50px",display:"flex"}},[a("el-date-picker",{staticStyle:{width:"250px"},attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions2},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}}),e._v(" "),a("el-select",{directives:[{name:"show",rawName:"v-show",value:e.depart,expression:"depart"}],staticStyle:{width:"120px"},attrs:{clearable:"",placeholder:"部门"},model:{value:e.department,callback:function(t){e.department=t},expression:"department"}},[a("el-option",{attrs:{label:"信息工程系",value:"信息工程系"}}),e._v(" "),a("el-option",{attrs:{label:"机械工程系",value:"机械工程系"}}),e._v(" "),a("el-option",{attrs:{label:"电子工程系",value:"电子工程系"}}),e._v(" "),a("el-option",{attrs:{label:"人文社科系",value:"人文社科系"}}),e._v(" "),a("el-option",{attrs:{label:"自动化工程系",value:"自动化工程系"}})],1),e._v(" "),a("el-input",{directives:[{name:"show",rawName:"v-show",value:e.userDis,expression:"userDis"}],staticStyle:{width:"90px"},attrs:{placeholder:"填报人"},model:{value:e.selectTable.uName,callback:function(t){e.$set(e.selectTable,"uName",t)},expression:"selectTable.uName"}}),e._v(" "),a("el-select",{staticStyle:{width:"90px"},attrs:{clearable:"",placeholder:"级别"},model:{value:e.selectTable.rank,callback:function(t){e.$set(e.selectTable,"rank",t)},expression:"selectTable.rank"}},[a("el-option",{attrs:{label:"国家级",value:"国家级"}}),e._v(" "),a("el-option",{attrs:{label:"省级",value:"省级"}}),e._v(" "),a("el-option",{attrs:{label:"市级",value:"市级"}}),e._v(" "),a("el-option",{attrs:{label:"区级",value:"区级"}}),e._v(" "),a("el-option",{attrs:{label:"校级",value:"校级"}})],1),e._v(" "),a("el-select",{staticStyle:{width:"120px"},attrs:{clearable:"",placeholder:"成果类别"},model:{value:e.category,callback:function(t){e.category=t},expression:"category"}},[a("el-option",{attrs:{label:"论文",value:"论文"}}),e._v(" "),a("el-option",{attrs:{label:"专利",value:"专利"}}),e._v(" "),a("el-option",{attrs:{label:"软著",value:"软著"}}),e._v(" "),a("el-option",{attrs:{label:"教材",value:"教材"}})],1),e._v(" "),a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",round:"",icon:"el-icon-search"},on:{click:e.select}}),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",round:"",icon:"el-icon-refresh"},on:{click:e.refresh}}),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:e.del}},[e._v("批量删除")]),e._v(" "),a("el-button",{attrs:{size:"medium ",type:"primary"},on:{click:e.output}},[e._v("批量导出")])],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"35"}}),e._v(" "),a("el-table-column",{attrs:{prop:"certificationTime",label:"获奖时间",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"department",label:"系部",width:"120","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"proName",label:"科研成果名称","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"categoryName",label:"成果类别",width:"80","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"proSource",label:"成果来源","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"rank",label:"成果级别",width:"80","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"uName",label:"填报人",width:"100","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}}),e._v(" "),a("el-button",{attrs:{size:"mini",icon:"el-icon-delete",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}})]}}])})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.display,expression:"display"}],staticClass:"block",staticStyle:{position:"fixed",bottom:"30px",left:"20%",right:"5%"}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pagesize,layout:"prev, pager, next, jumper",total:e.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1),e._v(" "),a("my-dialogResearch",{attrs:{research:e.research,info:e.info}})],1)},staticRenderFns:[]};var n=a("VU/8")(o,i,!1,function(e){a("YTya")},null,null);t.default=n.exports},YTya:function(e,t){},zCTG:function(e,t){}});
//# sourceMappingURL=3.5da9ef9ba73c49ccb58c.js.map